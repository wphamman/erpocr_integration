{
	"actions": [],
	"autoname": "naming_series:",
	"creation": "2025-01-01 00:00:00.000000",
	"default_view": "List",
	"doctype": "DocType",
	"editable_grid": 1,
	"engine": "InnoDB",
	"field_order": [
		"naming_series",
		"status",
		"source_filename",
		"email_message_id",
		"column_break_header",
		"source_type",
		"uploaded_by",
		"company",
		"currency",
		"extraction_time",
		"confidence",
		"section_break_drive",
		"drive_file_id",
		"drive_link",
		"column_break_drive",
		"drive_folder_path",
		"section_break_supplier",
		"supplier_name_ocr",
		"supplier_tax_id",
		"supplier",
		"column_break_supplier",
		"supplier_match_status",
		"section_break_invoice",
		"invoice_number",
		"invoice_date",
		"due_date",
		"column_break_invoice",
		"subtotal",
		"tax_amount",
		"total_amount",
		"tax_template",
		"section_break_items",
		"items",
		"section_break_result",
		"purchase_invoice",
		"column_break_result",
		"error_log",
		"section_break_raw",
		"raw_payload"
	],
	"fields": [
		{
			"fieldname": "naming_series",
			"fieldtype": "Select",
			"hidden": 1,
			"label": "Series",
			"options": "OCR-IMP-.#####",
			"default": "OCR-IMP-.#####"
		},
		{
			"default": "Pending",
			"fieldname": "status",
			"fieldtype": "Select",
			"in_list_view": 1,
			"in_standard_filter": 1,
			"label": "Status",
			"options": "Pending\nNeeds Review\nMatched\nCompleted\nError",
			"read_only": 1
		},
		{
			"fieldname": "source_filename",
			"fieldtype": "Data",
			"in_list_view": 1,
			"label": "Source Filename",
			"read_only": 1
		},
		{
			"fieldname": "email_message_id",
			"fieldtype": "Data",
			"label": "Email Message ID",
			"read_only": 1,
			"hidden": 1,
			"description": "Unique identifier from email header (used to prevent duplicate processing)"
		},
		{
			"fieldname": "column_break_header",
			"fieldtype": "Column Break"
		},
		{
			"default": "Gemini Manual Upload",
			"fieldname": "source_type",
			"fieldtype": "Select",
			"in_standard_filter": 1,
			"label": "Source Type",
			"options": "Gemini Manual Upload\nGemini Email\nGemini Drive Scan",
			"read_only": 1
		},
		{
			"fieldname": "uploaded_by",
			"fieldtype": "Link",
			"label": "Uploaded By",
			"options": "User",
			"read_only": 1
		},
		{
			"fieldname": "company",
			"fieldtype": "Link",
			"label": "Company",
			"options": "Company",
			"reqd": 1,
			"in_list_view": 1,
			"in_standard_filter": 1,
			"description": "Company for this import (used for matching and PI creation)"
		},
		{
			"fieldname": "currency",
			"fieldtype": "Link",
			"label": "Currency",
			"options": "Currency",
			"in_list_view": 1,
			"description": "Invoice currency (e.g., USD, ZAR, EUR)"
		},
		{
			"description": "Time taken by Gemini API to extract data (seconds)",
			"fieldname": "extraction_time",
			"fieldtype": "Float",
			"label": "Extraction Time",
			"read_only": 1
		},
		{
			"description": "Gemini's self-reported extraction confidence (0-100%)",
			"fieldname": "confidence",
			"fieldtype": "Percent",
			"label": "Confidence",
			"read_only": 1
		},
		{
			"fieldname": "section_break_drive",
			"fieldtype": "Section Break",
			"label": "Google Drive Archive",
			"collapsible": 1
		},
		{
			"fieldname": "drive_file_id",
			"fieldtype": "Data",
			"label": "Drive File ID",
			"read_only": 1,
			"hidden": 1,
			"description": "Google Drive file ID for the original PDF"
		},
		{
			"fieldname": "drive_link",
			"fieldtype": "Data",
			"label": "Drive Link",
			"read_only": 1,
			"description": "Shareable link to view original invoice PDF in Google Drive"
		},
		{
			"fieldname": "column_break_drive",
			"fieldtype": "Column Break"
		},
		{
			"fieldname": "drive_folder_path",
			"fieldtype": "Data",
			"label": "Archive Folder Path",
			"read_only": 1,
			"description": "Google Drive folder path where PDF is stored"
		},
		{
			"fieldname": "section_break_supplier",
			"fieldtype": "Section Break",
			"label": "Supplier"
		},
		{
			"fieldname": "supplier_name_ocr",
			"fieldtype": "Data",
			"in_list_view": 1,
			"label": "Supplier Name (OCR)",
			"read_only": 1
		},
		{
			"fieldname": "supplier_tax_id",
			"fieldtype": "Data",
			"label": "Supplier Tax ID (OCR)",
			"read_only": 1,
			"description": "Tax ID extracted from invoice. Review and update Supplier master manually if needed."
		},
		{
			"fieldname": "supplier",
			"fieldtype": "Link",
			"in_list_view": 1,
			"label": "Supplier",
			"options": "Supplier"
		},
		{
			"fieldname": "column_break_supplier",
			"fieldtype": "Column Break"
		},
		{
			"default": "Unmatched",
			"fieldname": "supplier_match_status",
			"fieldtype": "Select",
			"label": "Supplier Match Status",
			"options": "Auto Matched\nSuggested\nUnmatched\nConfirmed",
			"read_only": 1
		},
		{
			"fieldname": "section_break_invoice",
			"fieldtype": "Section Break",
			"label": "Invoice Details"
		},
		{
			"fieldname": "invoice_number",
			"fieldtype": "Data",
			"label": "Invoice Number"
		},
		{
			"fieldname": "invoice_date",
			"fieldtype": "Date",
			"label": "Invoice Date"
		},
		{
			"fieldname": "due_date",
			"fieldtype": "Date",
			"label": "Due Date"
		},
		{
			"fieldname": "column_break_invoice",
			"fieldtype": "Column Break"
		},
		{
			"fieldname": "subtotal",
			"fieldtype": "Currency",
			"label": "Subtotal",
			"read_only": 1
		},
		{
			"fieldname": "tax_amount",
			"fieldtype": "Currency",
			"label": "Tax Amount",
			"read_only": 1
		},
		{
			"fieldname": "total_amount",
			"fieldtype": "Currency",
			"label": "Total Amount",
			"read_only": 1
		},
		{
			"fieldname": "tax_template",
			"fieldtype": "Link",
			"label": "Tax Template",
			"options": "Purchase Taxes and Charges Template",
			"description": "Auto-set based on tax detection. Change before creating PI if needed."
		},
		{
			"fieldname": "section_break_items",
			"fieldtype": "Section Break",
			"label": "Line Items"
		},
		{
			"fieldname": "items",
			"fieldtype": "Table",
			"label": "Items",
			"options": "OCR Import Item"
		},
		{
			"fieldname": "section_break_result",
			"fieldtype": "Section Break",
			"label": "Result"
		},
		{
			"fieldname": "purchase_invoice",
			"fieldtype": "Link",
			"label": "Purchase Invoice",
			"options": "Purchase Invoice",
			"read_only": 1
		},
		{
			"fieldname": "column_break_result",
			"fieldtype": "Column Break"
		},
		{
			"fieldname": "error_log",
			"fieldtype": "Link",
			"label": "Error Log",
			"options": "Error Log",
			"read_only": 1
		},
		{
			"collapsible": 1,
			"fieldname": "section_break_raw",
			"fieldtype": "Section Break",
			"label": "Raw OCR Data"
		},
		{
			"fieldname": "raw_payload",
			"fieldtype": "Code",
			"label": "Raw Payload",
			"options": "JSON",
			"read_only": 1,
			"permlevel": 1
		}
	],
	"index_web_pages_for_search": 1,
	"links": [],
	"modified": "2025-01-01 00:00:00.000000",
	"modified_by": "Administrator",
	"module": "ERPNext OCR",
	"name": "OCR Import",
	"owner": "Administrator",
	"permissions": [
		{
			"create": 1,
			"delete": 1,
			"email": 1,
			"export": 1,
			"print": 1,
			"read": 1,
			"report": 1,
			"role": "System Manager",
			"share": 1,
			"write": 1
		},
		{
			"create": 1,
			"email": 1,
			"export": 1,
			"print": 1,
			"read": 1,
			"report": 1,
			"role": "OCR Manager",
			"share": 1,
			"write": 1
		},
		{
			"permlevel": 1,
			"read": 1,
			"role": "System Manager",
			"write": 1
		}
	],
	"sort_field": "modified",
	"sort_order": "DESC",
	"states": [],
	"track_changes": 1
}
